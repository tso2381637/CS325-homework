from collections import defaultdict
from heapdict import heapdict
def shortest(target, edges):

	hd = heapdict()
	adjlist = defaultdict(list)
	d = defaultdict(lambda:float('inf'))
	back = defaultdict(int)
	d[0] = 0
	for u,v,w in edges:
		adjlist[u].append((v,w))
		adjlist[v].append((u,w))

	hd[0] = 0
	while len(hd)>0:
		u,uw = hd.peekitem()

		if u == target-1:
			hd.popitem()
			break
		hd.popitem()
		for v in adjlist[u]:
			v, w = v 
			if d[u] + w < d[v]:
				back[v] = u
				hd[v] = d[u] + w
				d[v] = d[u] + w
	
	return d[target-1],backtrace(back,target-1)


def backtrace(back, node):
	if node == 0:
		return [0]
	return backtrace(back,back[node]) + [node]


if __name__ == "__main__":

	print(shortest(1000, [(137, 582, 5), (120, 261, 8), (460, 779, 8), (388, 667, 6), (96, 499, 5), (855, 914, 8), (443, 622, 5), (456, 712, 7), (738, 821, 6), (605, 967, 5), (325, 923, 5), (22, 26, 10), (9, 554, 8), (221, 702, 8), (29, 743, 9), (227, 782, 8), (507, 961, 9), (238, 353, 6), (224, 693, 8), (296, 975, 5), (426, 857, 9), (657, 944, 5), (190, 644, 10), (303, 880, 5), (340, 760, 10), (728, 996, 9), (958, 990, 8), (519, 849, 10), (194, 310, 7), (601, 996, 8), (866, 963, 9), (402, 603, 5), (248, 491, 10), (413, 816, 8), (177, 680, 7), (561, 903, 10), (690, 794, 10), (88, 383, 8), (520, 679, 5), (167, 797, 9), (402, 860, 7), (501, 750, 5), (44, 480, 7), (720, 868, 9), (592, 607, 8), (174, 662, 6), (232, 514, 5), (204, 789, 9), (880, 942, 9), (237, 414, 9), (352, 975, 9), (361, 470, 7), (561, 675, 9), (746, 980, 5), (392, 802, 10), (524, 828, 6), (531, 796, 9), (210, 436, 5), (492, 890, 7), (567, 583, 6), (516, 963, 8), (496, 832, 7), (354, 424, 5), (551, 553, 9), (627, 805, 7), (469, 614, 5), (235, 823, 10), (181, 563, 9), (185, 881, 5), (564, 817, 7), (33, 861, 10), (72, 85, 5), (14, 463, 7), (255, 275, 5), (639, 816, 6), (297, 352, 5), (163, 171, 7), (540, 974, 6), (279, 672, 10), (301, 728, 8), (329, 719, 8), (116, 485, 5), (319, 395, 7), (431, 815, 6), (111, 264, 7), (747, 921, 9), (214, 988, 9), (442, 836, 5), (18, 230, 8), (36, 149, 10), (164, 982, 8), (518, 721, 10), (436, 557, 6), (645, 999, 10), (461, 528, 6), (536, 664, 5), (404, 691, 9), (328, 822, 10), (436, 646, 5), (305, 755, 6), (217, 991, 5), (72, 313, 5), (317, 939, 7), (162, 761, 8), (258, 578, 6), (8, 574, 5), (604, 839, 6), (922, 985, 9), (175, 471, 10), (521, 637, 5), (205, 387, 7), (101, 210, 9), (690, 918, 8), (198, 605, 8), (106, 960, 10), (303, 399, 9), (17, 511, 7), (626, 892, 8), (288, 921, 5), (160, 205, 7), (576, 830, 6), (347, 439, 6), (272, 690, 5), (388, 857, 9), (352, 936, 10), (496, 547, 9), (66, 240, 10), (41, 86, 6), (170, 173, 9), (218, 274, 7), (518, 614, 7), (346, 376, 7), (116, 298, 6), (888, 966, 9), (798, 977, 10), (500, 908, 6), (564, 593, 5), (40, 328, 8), (74, 389, 6), (128, 848, 7), (117, 629, 9), (800, 948, 8), (78, 584, 9), (229, 579, 5), (273, 975, 7), (302, 912, 9), (547, 947, 5), (468, 918, 7), (110, 805, 5), (302, 847, 5), (628, 686, 5), (93, 423, 5), (845, 906, 5), (192, 245, 9), (165, 431, 5), (171, 461, 10), (162, 247, 10), (105, 865, 8), (932, 987, 8), (825, 993, 9), (837, 931, 7), (259, 563, 10), (322, 488, 5), (212, 667, 7), (27, 40, 5), (805, 947, 7), (610, 743, 7), (400, 460, 7), (64, 408, 5), (324, 935, 9), (466, 993, 5), (220, 256, 9), (796, 912, 9), (704, 888, 8), (364, 677, 7), (187, 554, 6), (203, 314, 6), (83, 369, 7), (91, 771, 8), (92, 667, 9), (347, 658, 6), (399, 989, 7), (42, 335, 6), (324, 811, 9), (914, 943, 7), (251, 342, 5), (557, 626, 9), (610, 826, 5), (225, 250, 5), (249, 827, 8), (74, 274, 9), (72, 888, 10), (22, 76, 10), (10, 297, 7), (480, 505, 6), (103, 513, 7), (78, 521, 10), (177, 183, 6), (144, 841, 7), (109, 312, 10), (526, 854, 9), (129, 300, 6), (145, 558, 10), (32, 798, 7), (840, 924, 9), (688, 823, 9), (860, 966, 10), (210, 706, 6), (306, 443, 9), (49, 161, 10), (683, 882, 6), (258, 796, 5), (698, 986, 8), (440, 827, 9), (256, 554, 8), (550, 871, 8), (11, 405, 7), (175, 264, 8), (24, 812, 10), (426, 955, 9), (19, 63, 10), (363, 593, 6), (128, 607, 6), (265, 848, 7), (407, 577, 8), (176, 627, 5), (239, 497, 5), (181, 541, 7), (512, 914, 10), (448, 942, 10), (654, 748, 6), (244, 320, 8), (490, 703, 6), (422, 729, 7), (573, 625, 10), (669, 939, 7), (661, 995, 6), (49, 943, 5), (523, 781, 10), (377, 898, 6), (523, 784, 6), (305, 319, 10), (306, 869, 9), (169, 380, 10), (718, 754, 8), (87, 608, 5), (620, 918, 9), (386, 584, 6), (159, 256, 8), (222, 964, 9), (736, 775, 5), (506, 697, 8), (652, 734, 7), (393, 527, 6), (557, 747, 5), (92, 536, 7), (103, 643, 7), (754, 934, 5), (982, 998, 6), (794, 992, 9), (862, 990, 10), (703, 717, 5), (455, 871, 6), (871, 994, 8), (821, 962, 8), (168, 406, 7), (129, 448, 9), (499, 930, 6), (122, 441, 9), (418, 546, 5), (302, 676, 7), (254, 387, 10), (4, 572, 6), (449, 541, 9), (21, 31, 10), (620, 996, 6), (266, 855, 6), (177, 291, 6), (205, 555, 7), (318, 599, 7), (699, 852, 8), (810, 881, 6), (365, 558, 8), (430, 876, 5), (213, 787, 9), (392, 900, 6), (290, 830, 5), (826, 925, 5), (120, 582, 10), (13, 558, 7), (690, 988, 10), (664, 996, 6), (76, 512, 7), (586, 824, 7), (447, 515, 10), (365, 776, 9), (0, 331, 5), (452, 735, 8), (312, 358, 9), (347, 408, 10), (585, 699, 8), (115, 663, 8), (208, 391, 9), (3, 284, 10), (612, 739, 10), (745, 849, 9), (203, 945, 8), (615, 854, 9), (418, 959, 10), (312, 729, 10), (174, 460, 9), (543, 684, 6), (368, 538, 5), (398, 694, 9), (436, 993, 8), (344, 881, 9), (598, 997, 10), (716, 919, 10), (69, 504, 10), (253, 655, 10), (297, 644, 5), (416, 738, 10), (159, 648, 8), (276, 801, 6), (75, 785, 9), (10, 357, 7), (725, 817, 8), (701, 894, 9), (155, 310, 8), (265, 852, 8), (173, 478, 9), (46, 277, 9), (100, 762, 9), (71, 432, 7), (68, 672, 8), (20, 168, 9), (727, 968, 6), (95, 707, 8), (651, 705, 7), (311, 619, 6), (212, 540, 6), (341, 907, 7), (70, 76, 10), (850, 932, 9), (377, 674, 8), (523, 571, 10), (50, 172, 7), (668, 752, 10), (569, 834, 7), (364, 624, 10), (237, 401, 9), (176, 409, 8), (265, 808, 9), (337, 733, 6), (264, 986, 9), (250, 723, 10), (31, 872, 9), (324, 412, 8), (779, 955, 6), (275, 804, 6), (74, 640, 10), (169, 891, 9), (454, 595, 10), (151, 620, 7), (470, 539, 6), (141, 797, 6), (732, 915, 8), (317, 369, 8), (118, 246, 10), (211, 735, 10), (69, 312, 5), (233, 406, 7), (504, 950, 5), (191, 978, 5), (56, 828, 9), (23, 910, 6), (35, 699, 8), (541, 720, 10), (908, 987, 9), (350, 452, 10), (281, 857, 5), (627, 709, 6), (97, 227, 8), (238, 506, 8), (386, 768, 6), (237, 996, 6), (290, 839, 8), (560, 593, 8), (216, 462, 10), (264, 338, 8), (113, 607, 6), (47, 80, 5), (5, 816, 8), (327, 910, 8), (594, 868, 7), (200, 940, 8), (163, 901, 10), (155, 812, 5), (15, 396, 6), (680, 897, 9), (58, 578, 8), (133, 260, 5), (473, 667, 7), (14, 927, 5), (62, 549, 9), (132, 860, 5), (280, 955, 5), (93, 442, 6), (28, 511, 10), (133, 762, 7), (703, 836, 6), (458, 678, 8), (337, 646, 7), (266, 992, 10), (248, 650, 6), (61, 602, 9), (179, 358, 8), (619, 714, 9), (534, 653, 5), (361, 926, 9), (422, 551, 6), (728, 901, 9), (434, 941, 10), (71, 730, 7), (625, 761, 10), (770, 995, 5), (181, 257, 5), (60, 154, 6), (438, 875, 5), (54, 652, 5), (832, 934, 9), (480, 513, 7), (101, 320, 5), (129, 544, 5), (453, 680, 6), (404, 916, 10), (903, 920, 8), (25, 754, 9), (92, 276, 7), (333, 819, 5), (35, 309, 8), (59, 750, 7), (320, 752, 6), (266, 813, 8), (119, 826, 10), (96, 311, 8), (251, 861, 9), (210, 570, 7), (346, 945, 9), (400, 802, 9), (107, 492, 6), (668, 834, 8), (536, 572, 10), (854, 864, 9), (532, 718, 9), (30, 918, 7), (160, 761, 6), (379, 398, 9), (99, 332, 8), (129, 353, 9), (44, 66, 7), (818, 834, 10), (321, 546, 8), (305, 326, 7), (279, 333, 10), (532, 766, 9), (8, 538, 5), (152, 324, 10), (333, 803, 7), (70, 586, 8), (286, 491, 8), (372, 934, 10), (389, 993, 5), (592, 944, 5), (49, 137, 9), (503, 589, 7), (251, 802, 10), (587, 764, 7), (370, 964, 10), (379, 412, 7), (475, 612, 7), (519, 544, 6), (29, 151, 7), (226, 703, 9), (136, 928, 5), (189, 784, 8), (745, 961, 9), (51, 831, 5), (558, 697, 7), (109, 731, 6), (68, 267, 10), (539, 584, 10), (80, 875, 5), (813, 871, 6), (658, 858, 6), (523, 882, 8), (22, 604, 7), (867, 921, 8), (727, 826, 7), (225, 912, 6), (505, 612, 6), (435, 463, 10), (375, 557, 6), (493, 817, 10), (74, 833, 7), (206, 417, 5), (544, 764, 8), (526, 897, 8), (78, 413, 9), (522, 903, 9), (435, 598, 5), (360, 871, 8), (6, 194, 7), (707, 712, 10), (5, 553, 5), (309, 841, 9), (764, 908, 7), (795, 994, 9), (585, 660, 9), (289, 538, 8), (555, 962, 9), (418, 617, 10), (315, 595, 8), (134, 309, 9), (454, 600, 6), (563, 791, 6), (258, 651, 5), (434, 753, 10), (37, 579, 7), (411, 430, 7), (674, 958, 10), (18, 920, 5), (92, 947, 5), (275, 392, 8), (278, 815, 7), (651, 767, 8), (344, 787, 8), (467, 822, 5), (363, 495, 6), (151, 425, 5), (176, 833, 7), (376, 878, 6), (603, 805, 7), (422, 972, 7), (526, 961, 7), (430, 757, 10), (280, 443, 7), (795, 935, 8), (220, 732, 8), (972, 994, 8), (435, 733, 5), (65, 132, 6), (153, 989, 6), (26, 747, 5), (159, 259, 8), (793, 975, 5), (408, 665, 10), (191, 854, 5), (91, 437, 9), (52, 977, 9), (223, 547, 8), (48, 355, 10), (948, 992, 5), (566, 752, 10), (429, 854, 10), (121, 758, 7), (285, 700, 6), (491, 824, 10), (48, 878, 6), (659, 693, 5), (399, 887, 5), (458, 684, 7), (520, 698, 8), (402, 926, 5), (620, 874, 8), (108, 152, 8), (628, 927, 10), (171, 206, 9), (263, 426, 10), (909, 957, 9), (295, 889, 8), (648, 916, 9), (219, 934, 9), (345, 881, 8), (8, 105, 10), (355, 673, 10), (57, 273, 9), (450, 640, 7), (778, 925, 5), (234, 520, 7), (276, 723, 6), (151, 421, 6), (199, 262, 8), (574, 645, 9), (925, 983, 5), (545, 854, 9), (152, 521, 8), (276, 286, 8), (313, 712, 7), (219, 503, 8), (376, 613, 8), (247, 346, 6), (620, 777, 6), (756, 901, 9), (461, 710, 9), (59, 153, 9), (333, 541, 10), (138, 660, 6), (322, 637, 8), (337, 491, 5), (130, 908, 6), (262, 715, 6), (90, 650, 9), (719, 848, 5), (176, 576, 10), (118, 231, 9), (204, 515, 9), (675, 905, 7), (335, 432, 5), (20, 792, 7), (630, 841, 6), (86, 760, 6), (286, 697, 10), (349, 881, 7), (615, 736, 9), (23, 388, 5), (337, 355, 6), (116, 256, 6), (587, 697, 5), (79, 355, 5), (105, 742, 7), (254, 324, 7), (50, 542, 7), (31, 80, 6), (408, 947, 7), (737, 956, 10), (247, 707, 5), (336, 695, 7), (8, 527, 7), (971, 981, 5), (360, 945, 10), (741, 863, 6), (620, 949, 7), (93, 414, 10), (590, 635, 10), (486, 540, 9), (428, 548, 8), (308, 919, 6), (309, 647, 9), (55, 136, 9), (112, 520, 6), (220, 246, 8), (281, 559, 5), (256, 551, 7), (542, 967, 7), (129, 484, 8), (106, 725, 10), (70, 382, 10), (371, 557, 9), (568, 864, 10), (519, 701, 9), (31, 633, 7), (456, 698, 6), (76, 159, 9), (145, 692, 6), (495, 861, 7), (373, 909, 7), (159, 163, 8), (450, 853, 8), (120, 615, 6), (276, 302, 10), (703, 818, 10), (618, 975, 5), (550, 975, 5), (834, 941, 10), (135, 388, 10), (575, 964, 5), (31, 470, 8), (612, 695, 8), (282, 955, 7), (415, 418, 9), (54, 473, 5), (482, 797, 5), (661, 721, 10), (0, 831, 5), (113, 851, 9), (142, 543, 9), (364, 781, 9), (277, 801, 9), (930, 991, 10), (364, 821, 8), (714, 839, 6), (827, 949, 9), (108, 245, 9), (366, 974, 6), (119, 795, 5), (720, 938, 7), (432, 900, 10), (259, 354, 10), (640, 919, 5), (445, 631, 8), (367, 385, 7), (772, 835, 7), (451, 817, 10), (243, 650, 9), (147, 531, 5), (349, 689, 5), (525, 912, 6), (556, 658, 10), (499, 915, 7), (727, 775, 5), (596, 998, 5), (491, 918, 6), (392, 646, 6), (406, 733, 6), (102, 254, 7), (993, 998, 7), (251, 672, 10), (472, 760, 8), (378, 504, 10), (679, 791, 10), (198, 959, 8), (408, 451, 9), (123, 585, 8), (272, 949, 6), (12, 153, 8), (111, 424, 5), (76, 668, 6), (469, 784, 8), (514, 683, 7), (159, 939, 6), (537, 995, 5), (260, 969, 5), (406, 475, 10), (721, 753, 6), (550, 712, 8), (5, 557, 6), (433, 929, 6), (183, 678, 7), (244, 678, 5), (549, 793, 9), (164, 983, 6), (384, 599, 5), (222, 525, 8), (241, 813, 5), (528, 958, 10), (194, 717, 9), (626, 707, 10), (79, 549, 6), (407, 798, 8), (121, 580, 10), (49, 396, 5), (96, 573, 10), (490, 834, 5), (244, 530, 5), (21, 978, 7), (284, 477, 10), (170, 425, 9), (136, 575, 10), (325, 846, 9), (459, 651, 9), (427, 822, 9), (171, 715, 8), (398, 715, 6), (507, 836, 7), (368, 950, 6), (265, 580, 7), (179, 865, 10), (85, 636, 10), (344, 369, 6), (261, 264, 7), (357, 393, 7), (478, 579, 5), (152, 976, 6), (258, 981, 6), (72, 201, 9), (550, 633, 6), (439, 556, 10), (245, 892, 9), (142, 567, 8), (400, 728, 6), (84, 640, 5), (156, 805, 10), (30, 58, 10), (391, 415, 8), (140, 698, 9), (132, 611, 10), (551, 559, 5), (247, 949, 8), (142, 292, 6), (677, 736, 8), (365, 767, 6), (230, 304, 10), (147, 356, 8), (298, 548, 5), (526, 847, 7), (213, 722, 8), (22, 297, 9), (105, 606, 9), (381, 772, 8), (261, 633, 5), (53, 848, 7), (163, 831, 6), (945, 979, 10), (105, 841, 5), (445, 874, 10), (251, 600, 10), (212, 516, 9), (124, 406, 10), (217, 838, 8), (676, 945, 9), (137, 833, 10), (260, 592, 10), (3, 734, 5), (206, 828, 9), (387, 678, 8), (558, 628, 6), (38, 274, 10), (171, 687, 10), (567, 943, 9), (238, 875, 8), (280, 990, 10), (408, 431, 7), (100, 505, 10), (850, 853, 6), (191, 572, 5), (464, 771, 5), (219, 500, 8), (747, 842, 9), (842, 946, 7), (249, 929, 5), (78, 694, 10), (43, 866, 8), (452, 853, 6), (177, 979, 9), (194, 514, 9), (394, 534, 7), (201, 238, 7), (674, 898, 9), (775, 795, 5), (349, 927, 5), (45, 469, 9), (181, 912, 6), (874, 928, 7), (44, 480, 9), (66, 513, 9), (94, 405, 8), (524, 815, 9), (308, 661, 8), (274, 927, 7), (481, 984, 5), (565, 970, 8), (17, 437, 7), (602, 766, 7), (152, 814, 9), (569, 603, 7), (67, 885, 9), (806, 809, 7), (400, 425, 9), (24, 809, 9), (116, 595, 5), (542, 587, 5), (103, 923, 7), (344, 955, 7), (564, 768, 5), (379, 652, 9), (75, 496, 10), (85, 867, 9), (342, 456, 9), (829, 941, 9), (3, 944, 6), (332, 931, 7), (149, 219, 9), (151, 603, 5), (324, 413, 9), (430, 841, 7), (349, 872, 7), (377, 623, 5), (64, 728, 10), (252, 839, 7), (772, 992, 8), (290, 563, 9), (633, 804, 5), (76, 725, 6), (926, 958, 7), (85, 423, 6), (289, 564, 10), (269, 656, 6), (101, 215, 7), (491, 739, 5), (524, 755, 7), (806, 894, 6), (556, 841, 5), (323, 563, 7), (303, 948, 9), (36, 136, 8), (372, 833, 10), (29, 38, 7), (427, 767, 6), (570, 908, 5), (602, 723, 10), (644, 679, 9), (188, 434, 6), (117, 238, 9), (133, 997, 9), (125, 518, 10), (272, 469, 6), (56, 800, 7), (467, 985, 7), (949, 987, 9), (363, 740, 6), (947, 954, 10), (9, 14, 8), (33, 168, 7), (565, 920, 5), (9, 235, 5), (536, 836, 6), (35, 968, 9), (205, 214, 8), (248, 295, 8), (380, 518, 7), (401, 967, 10), (75, 199, 9), (185, 192, 10), (304, 638, 9), (436, 628, 8), (23, 372, 8), (21, 952, 5), (640, 674, 9), (634, 680, 8), (724, 847, 9), (347, 351, 5), (430, 662, 6), (526, 718, 8), (862, 974, 9), (577, 676, 9), (513, 962, 8), (614, 696, 10), (589, 926, 8), (482, 618, 6), (274, 852, 10), (537, 839, 7), (576, 783, 8), (552, 621, 7), (261, 317, 5), (619, 775, 5), (468, 800, 8), (364, 913, 6), (454, 520, 6), (487, 716, 7), (640, 712, 6), (393, 883, 8), (55, 657, 5), (364, 892, 5), (261, 769, 9), (55, 759, 7), (15, 387, 7), (316, 346, 9), (805, 899, 5), (213, 733, 5), (122, 336, 10), (660, 840, 5), (131, 799, 10), (301, 982, 8), (348, 622, 6), (27, 985, 10), (706, 717, 6), (773, 784, 9), (587, 767, 10), (309, 374, 7), (387, 430, 9), (472, 996, 5), (203, 962, 8), (237, 960, 9), (43, 632, 6), (229, 644, 6), (404, 730, 8), (215, 636, 6), (306, 737, 10), (736, 900, 7), (1, 729, 10), (314, 703, 8), (174, 509, 10), (31, 149, 7), (447, 567, 7), (820, 895, 9), (325, 501, 9), (114, 597, 10), (299, 829, 9), (282, 678, 8), (11, 862, 7), (88, 770, 10), (117, 503, 9), (225, 891, 9), (658, 765, 10), (949, 996, 7), (381, 447, 6), (55, 104, 9), (526, 527, 9), (132, 166, 7)]))
	print(shortest(4, [(0,1,1), (0,2,5), (1,2,1), (2,3,2), (1,3,6)]))
